{"ast":null,"code":"var _jsxFileName = \"/Users/admin/Documents/mystudy/tell-me-react/src/components/Comment.jsx\",\n    _s = $RefreshSig$();\n\nimport axios from \"axios\";\nimport React from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { setDataDeleteComment, setDataUpdateComment } from \"../redux/action\";\nimport \"../scss/components/comments.scss\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar currentdate = new Date();\nvar datetime = currentdate.getFullYear() + \"-\" + currentdate.getMonth() + \"-\" + currentdate.getDay() + \"T\" + currentdate.getHours() + \":\" + currentdate.getMinutes() + \":\" + currentdate.getSeconds();\n\nconst Comment = comment => {\n  _s();\n\n  const [usersData, setUsersData] = React.useState([]);\n  const [updateCommentBody, setUpdateCommentBody] = React.useState({\n    value: \"\",\n    openUptComm: false,\n    id: \"\"\n  });\n  let dataAboutUser = JSON.parse(localStorage.user);\n  const dispatch = useDispatch(); // React.useEffect(() => {\n  //   fetch(`https://ekreative-json-server.herokuapp.com/users/${userId}`)\n  //     .then((response) => response.json())\n  //     .then((data) => {\n  //       setUsersData(data);\n  //     });\n  // }, []);\n\n  const handleChange = e => {\n    setUpdateCommentBody(prevState => ({ ...prevState,\n      value: e.target.value\n    }));\n  };\n\n  const openUpdateBlock = (id, body) => {\n    setUpdateCommentBody(prevState => ({ ...prevState,\n      value: body,\n      openUptComm: true,\n      id\n    }));\n  };\n\n  const updateComment = (_ref, updateBody) => {\n    let {\n      id\n    } = _ref;\n    const data = {\n      body: updateBody,\n      updatedAt: datetime\n    };\n    const headers = {\n      Authorization: `Bearer ${localStorage.getItem(\"token\").slice(1, -1)}`\n    };\n    console.log(id);\n    axios.patch(`https://ekreative-json-server.herokuapp.com/664/comments/${id}`, data, {\n      headers\n    }).then(response => dispatch(setDataUpdateComment(response.data)));\n    setUpdateCommentBody(prevState => ({ ...prevState,\n      openUptComm: false\n    }));\n  };\n\n  const deleteComment = id => {\n    const headers = {\n      Authorization: `Bearer ${localStorage.getItem(\"token\").slice(1, -1)}`\n    };\n    axios.delete(`https://ekreative-json-server.herokuapp.com/664/comments/${id}`, {\n      headers\n    }).then(response => dispatch(setDataDeleteComment(response.data)));\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"comment-data\",\n    children: updateCommentBody.openUptComm && comment.id === updateCommentBody.id ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"comment-content-for-update\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: updateCommentBody.value,\n        onChange: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => updateComment(comment.id, updateCommentBody.value),\n        children: \"Update\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"comment-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        className: \"user-avatar\",\n        src: usersData.avatar,\n        alt: \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: comment.body\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 13\n      }, this), localStorage.getItem(\"token\") && dataAboutUser.id === comment.userId ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"button-block\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => openUpdateBlock(comment.id, comment.body),\n          children: \"Update\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => deleteComment(comment.id),\n          children: \"Delete\"\n        }, comment.id + 2, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 17\n        }, this)]\n      }, comment.id + 1, true, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 15\n      }, this) : \"\"]\n    }, comment.id + 3 + \"li\", true, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 13\n    }, this)\n  }, comment.id, false, {\n    fileName: _jsxFileName,\n    lineNumber: 91,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Comment, \"If7h93JekxQPDNsf84HXyAXPXXo=\", false, function () {\n  return [useDispatch];\n});\n\n_c = Comment;\nexport default Comment;\n\nvar _c;\n\n$RefreshReg$(_c, \"Comment\");","map":{"version":3,"sources":["/Users/admin/Documents/mystudy/tell-me-react/src/components/Comment.jsx"],"names":["axios","React","useDispatch","setDataDeleteComment","setDataUpdateComment","currentdate","Date","datetime","getFullYear","getMonth","getDay","getHours","getMinutes","getSeconds","Comment","comment","usersData","setUsersData","useState","updateCommentBody","setUpdateCommentBody","value","openUptComm","id","dataAboutUser","JSON","parse","localStorage","user","dispatch","handleChange","e","prevState","target","openUpdateBlock","body","updateComment","updateBody","data","updatedAt","headers","Authorization","getItem","slice","console","log","patch","then","response","deleteComment","delete","avatar","userId"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport React from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { setDataDeleteComment, setDataUpdateComment } from \"../redux/action\";\nimport \"../scss/components/comments.scss\";\n\nvar currentdate = new Date();\nvar datetime =\n  currentdate.getFullYear() +\n  \"-\" +\n  currentdate.getMonth() +\n  \"-\" +\n  currentdate.getDay() +\n  \"T\" +\n  currentdate.getHours() +\n  \":\" +\n  currentdate.getMinutes() +\n  \":\" +\n  currentdate.getSeconds();\n\nconst Comment = (comment) => {\n  const [usersData, setUsersData] = React.useState([]);\n  const [updateCommentBody, setUpdateCommentBody] = React.useState({\n    value: \"\",\n    openUptComm: false,\n    id: \"\",\n  });\n  let dataAboutUser = JSON.parse(localStorage.user);\n\n  const dispatch = useDispatch()\n\n  // React.useEffect(() => {\n  //   fetch(`https://ekreative-json-server.herokuapp.com/users/${userId}`)\n  //     .then((response) => response.json())\n  //     .then((data) => {\n  //       setUsersData(data);\n  //     });\n  // }, []);\n\n \n\n  const handleChange = (e) => {\n    setUpdateCommentBody((prevState) => ({\n      ...prevState,\n      value: e.target.value,\n    }));\n  };\n\n  const openUpdateBlock = (id, body) => {\n    setUpdateCommentBody((prevState) => ({\n      ...prevState,\n      value: body,\n      openUptComm: true,\n      id,\n    }));\n  };\n\n  const updateComment = ({ id }, updateBody) => {\n    const data = {\n      body: updateBody,\n      updatedAt: datetime,\n    };\n    const headers = {\n      Authorization: `Bearer ${localStorage.getItem(\"token\").slice(1, -1)}`,\n    };\n    console.log(id);\n    axios.patch(\n      `https://ekreative-json-server.herokuapp.com/664/comments/${id}`,\n      data,\n      {headers}\n    )\n      .then(response => dispatch(setDataUpdateComment(response.data)))\n\n    setUpdateCommentBody((prevState) => ({\n      ...prevState,\n      openUptComm: false,\n    }));\n  };\n\n  const deleteComment = (id) => {\n    const headers = {\n      Authorization: `Bearer ${localStorage.getItem(\"token\").slice(1, -1)}`,\n    };\n    axios.delete(\n      `https://ekreative-json-server.herokuapp.com/664/comments/${id}`,\n      { headers }\n    ).then(response => dispatch(setDataDeleteComment(response.data)))\n  };\n\n  return (\n    <div key={comment.id} className=\"comment-data\">\n      {updateCommentBody.openUptComm && comment.id === updateCommentBody.id ? (\n        <div className=\"comment-content-for-update\">\n          <input\n            type=\"text\"\n            value={updateCommentBody.value}\n            onChange={handleChange}\n          />\n          <button onClick={() => updateComment(comment.id, updateCommentBody.value)}>\n            Update\n          </button>\n        </div>\n      ) : (\n            <div key={comment.id + 3 + \"li\"} className=\"comment-content\">\n              <img className=\"user-avatar\" src={usersData.avatar} alt=\"\" />\n            <p>{comment.body}</p>\n            {localStorage.getItem(\"token\") && dataAboutUser.id === comment.userId ? (\n              <div key={comment.id + 1} className=\"button-block\">\n                <button onClick={() => openUpdateBlock(comment.id, comment.body)}>\n                  Update\n                </button>\n                <button key={comment.id + 2} onClick={() => deleteComment(comment.id)}>\n                  Delete\n                </button>\n              </div>\n            ) : (\n              \"\"\n            )}\n          </div>\n      )}\n    </div>\n  );\n};\n\nexport default Comment;\n"]},"metadata":{},"sourceType":"module"}