{"ast":null,"code":"var _jsxFileName = \"/Users/admin/Documents/mystudy/tell-me-react/src/components/Comment.jsx\",\n    _s = $RefreshSig$();\n\nimport axios from \"axios\";\nimport React from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { setDataDeleteComments, setDataUpdateComment } from \"../redux/action\";\nimport \"../scss/components/comments.scss\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar currentdate = new Date();\nvar datetime = currentdate.getFullYear() + \"-\" + currentdate.getMonth() + \"-\" + currentdate.getDay() + \"T\" + currentdate.getHours() + \":\" + currentdate.getMinutes() + \":\" + currentdate.getSeconds();\n\nconst Comment = _ref => {\n  _s();\n\n  let {\n    id,\n    body,\n    userId\n  } = _ref;\n  const [usersData, setUsersData] = React.useState([]);\n  const [updateCommentBody, setUpdateCommentBody] = React.useState({\n    value: \"\",\n    openUptComm: false,\n    id: \"\"\n  });\n  let dataAboutUser = JSON.parse(localStorage.user);\n  console.log(userId);\n  const dispatch = useDispatch();\n  React.useEffect(() => {\n    getDataUser();\n  }, []);\n\n  const getDataUser = () => {\n    fetch(`https://ekreative-json-server.herokuapp.com/users/${userId}`).then(response => response.json()).then(data => {\n      setUsersData(data);\n    });\n  };\n\n  const handleChange = e => {\n    setUpdateCommentBody(prevState => ({ ...prevState,\n      value: e.target.value\n    }));\n  };\n\n  const openUpdateBlock = (id, body) => {\n    setUpdateCommentBody(prevState => ({ ...prevState,\n      value: body,\n      openUptComm: true,\n      id\n    }));\n  };\n\n  const updateComment = (_ref2, updateBody) => {\n    let {\n      id\n    } = _ref2;\n    const data = {\n      body: updateBody,\n      updatedAt: datetime\n    };\n    const headers = {\n      Authorization: `Bearer ${localStorage.getItem(\"token\").slice(1, -1)}`\n    };\n    axios.patch(`https://ekreative-json-server.herokuapp.com/664/comments/${id}`, data, headers).then(response => dispatch(setDataUpdateComment(response.data)));\n    setUpdateCommentBody(prevState => ({ ...prevState,\n      openUptComm: false\n    }));\n  };\n\n  const deleteComment = id => {\n    const headers = {\n      Authorization: `Bearer ${localStorage.getItem(\"token\").slice(1, -1)}`\n    };\n    axios.delete(`https://ekreative-json-server.herokuapp.com/664/comments/${id}`, {\n      headers\n    }).then(response => dispatch(setDataDeleteComments(response.data)));\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"comment-data\",\n    children: updateCommentBody.openUptComm && id === updateCommentBody.id ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"comment-content-for-update\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: updateCommentBody.value,\n        onChange: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => updateComment(id, updateCommentBody.value),\n        children: \"Update\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"comment-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        className: \"user-avatar\",\n        src: usersData.avatar,\n        alt: \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: body\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 13\n      }, this), localStorage.getItem(\"token\") && dataAboutUser.id === userId ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"button-block\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => openUpdateBlock(id, body),\n          children: \"Update\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => deleteComment(id),\n          children: \"Delete\"\n        }, id + 2, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 17\n        }, this)]\n      }, id + 1, true, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 15\n      }, this) : \"\"]\n    }, id + 3 + \"li\", true, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 13\n    }, this)\n  }, id, false, {\n    fileName: _jsxFileName,\n    lineNumber: 93,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Comment, \"OfoaaJbhQwOg1tzLv33fvW/3eNE=\", false, function () {\n  return [useDispatch];\n});\n\n_c = Comment;\nexport default Comment;\n\nvar _c;\n\n$RefreshReg$(_c, \"Comment\");","map":{"version":3,"sources":["/Users/admin/Documents/mystudy/tell-me-react/src/components/Comment.jsx"],"names":["axios","React","useDispatch","setDataDeleteComments","setDataUpdateComment","currentdate","Date","datetime","getFullYear","getMonth","getDay","getHours","getMinutes","getSeconds","Comment","id","body","userId","usersData","setUsersData","useState","updateCommentBody","setUpdateCommentBody","value","openUptComm","dataAboutUser","JSON","parse","localStorage","user","console","log","dispatch","useEffect","getDataUser","fetch","then","response","json","data","handleChange","e","prevState","target","openUpdateBlock","updateComment","updateBody","updatedAt","headers","Authorization","getItem","slice","patch","deleteComment","delete","avatar"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport React from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { setDataDeleteComments, setDataUpdateComment } from \"../redux/action\";\nimport \"../scss/components/comments.scss\";\n\nvar currentdate = new Date();\nvar datetime =\n  currentdate.getFullYear() +\n  \"-\" +\n  currentdate.getMonth() +\n  \"-\" +\n  currentdate.getDay() +\n  \"T\" +\n  currentdate.getHours() +\n  \":\" +\n  currentdate.getMinutes() +\n  \":\" +\n  currentdate.getSeconds();\n\nconst Comment = ({ id, body, userId }) => {\n  const [usersData, setUsersData] = React.useState([]);\n  const [updateCommentBody, setUpdateCommentBody] = React.useState({\n    value: \"\",\n    openUptComm: false,\n    id: \"\",\n  });\n  let dataAboutUser = JSON.parse(localStorage.user);\n\n  console.log(userId);\n\n  const dispatch = useDispatch()\n\n  React.useEffect(() => {\n    getDataUser();\n  }, []);\n\n  const getDataUser = () => {\n    fetch(`https://ekreative-json-server.herokuapp.com/users/${userId}`)\n      .then((response) => response.json())\n      .then((data) => {\n        setUsersData(data);\n      });\n  };\n\n  const handleChange = (e) => {\n    setUpdateCommentBody((prevState) => ({\n      ...prevState,\n      value: e.target.value,\n    }));\n  };\n\n  const openUpdateBlock = (id, body) => {\n    setUpdateCommentBody((prevState) => ({\n      ...prevState,\n      value: body,\n      openUptComm: true,\n      id,\n    }));\n  };\n\n  const updateComment = ({ id }, updateBody) => {\n    const data = {\n      body: updateBody,\n      updatedAt: datetime,\n    };\n    const headers = {\n      Authorization: `Bearer ${localStorage.getItem(\"token\").slice(1, -1)}`,\n    };\n    axios.patch(\n      `https://ekreative-json-server.herokuapp.com/664/comments/${id}`,\n      data,\n      headers\n    ).then(response => dispatch(setDataUpdateComment(response.data)))\n\n    setUpdateCommentBody((prevState) => ({\n      ...prevState,\n      openUptComm: false,\n    }));\n  };\n\n  const deleteComment = (id) => {\n    const headers = {\n      Authorization: `Bearer ${localStorage.getItem(\"token\").slice(1, -1)}`,\n    };\n    axios.delete(\n      `https://ekreative-json-server.herokuapp.com/664/comments/${id}`,\n      { headers }\n    ).then(response => dispatch(setDataDeleteComments(response.data)))\n  };\n\n  return (\n    <div key={id} className=\"comment-data\">\n      {updateCommentBody.openUptComm && id === updateCommentBody.id ? (\n        <div className=\"comment-content-for-update\">\n          <input\n            type=\"text\"\n            value={updateCommentBody.value}\n            onChange={handleChange}\n          />\n          <button onClick={() => updateComment(id, updateCommentBody.value)}>\n            Update\n          </button>\n        </div>\n      ) : (\n            <div key={id + 3 + \"li\"} className=\"comment-content\">\n              <img className=\"user-avatar\" src={usersData.avatar} alt=\"\" />\n            <p>{body}</p>\n            {localStorage.getItem(\"token\") && dataAboutUser.id === userId ? (\n              <div key={id + 1} className=\"button-block\">\n                <button onClick={() => openUpdateBlock(id, body)}>\n                  Update\n                </button>\n                <button key={id + 2} onClick={() => deleteComment(id)}>\n                  Delete\n                </button>\n              </div>\n            ) : (\n              \"\"\n            )}\n          </div>\n      )}\n    </div>\n  );\n};\n\nexport default Comment;\n"]},"metadata":{},"sourceType":"module"}